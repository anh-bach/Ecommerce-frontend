{"version":3,"sources":["components/forms/ProductCreateForm.js","pages/admin/product/ProductCreate.js","functions/category.js","components/nav/AdminNav.js","functions/product.js","components/forms/FileUpload.js"],"names":["Option","Select","ProductCreateForm","handleSubmit","handleChange","handleCategoryChange","values","subOptions","showSubs","setValues","title","description","price","category","categories","subs","shipping","quantity","colors","brands","color","brand","onSubmit","className","type","name","value","onChange","map","required","length","_id","mode","style","width","placeholder","sub","initialState","images","ProductCreate","useState","loading","setLoading","setSubOptions","setShowSubs","user","useSelector","state","useEffect","loadCategories","a","getCategories","res","data","console","log","response","e","preventDefault","createProduct","token","window","alert","toast","error","err","target","getCategorySubs","AdminNav","LoadingOutlined","FileUpload","axios","get","process","getCategory","slug","id","removeCategory","authtoken","delete","headers","updateCategory","put","createCategory","post","to","getProductsByCount","count","getProduct","removeProduct","updateProduct","listProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","resizeFile","file","Promise","resolve","Resizer","imageFileResizer","uri","fileUploadAndResize","files","allUploadedFiles","i","image","push","handleImageRemove","public_id","filter","onClick","cursor","src","url","size","shape","multiple","accept","hidden"],"mappings":"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","file":"static/js/29.5d04bc32.chunk.js","sourcesContent":["import React from 'react';\r\nimport Select from 'antd/lib/select';\r\n\r\nconst { Option } = Select;\r\n\r\nconst ProductCreateForm = ({\r\n  handleSubmit,\r\n  handleChange,\r\n  handleCategoryChange,\r\n  values,\r\n  subOptions,\r\n  showSubs,\r\n  setValues,\r\n}) => {\r\n  const {\r\n    title,\r\n    description,\r\n    price,\r\n    category,\r\n    categories,\r\n    subs,\r\n    shipping,\r\n    quantity,\r\n    colors,\r\n    brands,\r\n    color,\r\n    brand,\r\n  } = values;\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className='form-group'>\r\n        <label>Title</label>\r\n        <input\r\n          className='form-control'\r\n          type='text'\r\n          name='title'\r\n          value={title}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Description</label>\r\n        <input\r\n          className='form-control'\r\n          type='text'\r\n          name='description'\r\n          value={description}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Price</label>\r\n        <input\r\n          className='form-control'\r\n          type='number'\r\n          name='price'\r\n          value={price}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Shipping</label>\r\n        <select\r\n          name='shipping'\r\n          className='form-control'\r\n          onChange={handleChange}\r\n          value={shipping}\r\n        >\r\n          <option value=''>Please select</option>\r\n          <option value='Yes'>Yes</option>\r\n          <option value='No'>No</option>\r\n        </select>\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Quantity</label>\r\n        <input\r\n          className='form-control'\r\n          type='number'\r\n          name='quantity'\r\n          value={quantity}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Color</label>\r\n        <select\r\n          name='color'\r\n          className='form-control'\r\n          onChange={handleChange}\r\n          value={color}\r\n        >\r\n          <option value=''>Please select</option>\r\n          {colors.map((color) => (\r\n            <option key={color} value={color}>\r\n              {color}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Brand</label>\r\n        <select\r\n          name='brand'\r\n          className='form-control'\r\n          onChange={handleChange}\r\n          value={brand}\r\n        >\r\n          <option value=''>Please select</option>\r\n          {brands.map((brand) => (\r\n            <option key={brand} value={brand}>\r\n              {brand}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Category</label>\r\n        <select\r\n          className='form-control'\r\n          name='category'\r\n          onChange={handleCategoryChange}\r\n          value={category}\r\n          required\r\n        >\r\n          <option value=''>Please select category</option>\r\n          {categories.length > 0 &&\r\n            categories.map((category) => (\r\n              <option key={category._id} value={category._id}>\r\n                {category.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n      {showSubs && (\r\n        <div className='form-group'>\r\n          <label>Sub categories</label>\r\n          <Select\r\n            mode='multiple'\r\n            style={{ width: '100%' }}\r\n            placeholder='Please select'\r\n            value={subs}\r\n            onChange={(value) => setValues({ ...values, subs: value })}\r\n          >\r\n            {subOptions.length &&\r\n              subOptions.map((sub) => (\r\n                <Option key={sub._id} value={sub._id}>\r\n                  {sub.name}\r\n                </Option>\r\n              ))}\r\n          </Select>\r\n        </div>\r\n      )}\r\n      <button className='btn btn-outline-info'>Save</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ProductCreateForm;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { useSelector } from 'react-redux';\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\n\r\nimport AdminNav from '../../../components/nav/AdminNav';\r\nimport { createProduct } from '../../../functions/product';\r\nimport { getCategories, getCategorySubs } from '../../../functions/category';\r\nimport ProductCreateForm from '../../../components/forms/ProductCreateForm';\r\nimport FileUpload from '../../../components/forms/FileUpload';\r\n\r\nconst initialState = {\r\n  title: '',\r\n  description: '',\r\n  price: '',\r\n  category: '',\r\n  categories: [],\r\n  subs: [],\r\n  shipping: '',\r\n  quantity: '',\r\n  images: [],\r\n  colors: ['Black', 'Brown', 'Silver', 'White', 'Blue'],\r\n  brands: ['Apple', 'Samsung', 'Microsoft', 'Lenovo', 'ASUS'],\r\n  color: '',\r\n  brand: '',\r\n};\r\n\r\nconst ProductCreate = () => {\r\n  const [values, setValues] = useState(initialState);\r\n  const [loading, setLoading] = useState(false);\r\n  const [subOptions, setSubOptions] = useState([]);\r\n  const [showSubs, setShowSubs] = useState(false);\r\n\r\n  const user = useSelector((state) => state.user);\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = async () => {\r\n    try {\r\n      const res = await getCategories();\r\n      setValues({ ...values, categories: res.data });\r\n    } catch (error) {\r\n      console.log('from load categories', error.response);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await createProduct(values, user.token);\r\n      // toast.success(`${title} is created`);\r\n      setLoading(false);\r\n\r\n      window.alert(`${res.data.title} is created`);\r\n    } catch (error) {\r\n      console.log('Error from create product', error.response);\r\n      setLoading(false);\r\n      toast.error(error.response.data.err);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleCategoryChange = async (e) => {\r\n    setValues({ ...values, subs: [], category: e.target.value });\r\n    try {\r\n      const res = await getCategorySubs(e.target.value);\r\n      setSubOptions(res.data);\r\n\r\n      setShowSubs(true);\r\n    } catch (error) {\r\n      console.log('From handleCategoryChange', error.response);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container-fluid'>\r\n      <div className='row'>\r\n        <div className='col-md-2'>\r\n          <AdminNav />\r\n        </div>\r\n        <div className='col-md-10'>\r\n          {loading ? (\r\n            <LoadingOutlined className='text-danger h1' />\r\n          ) : (\r\n            <h4>Product Create</h4>\r\n          )}\r\n          <hr />\r\n          <div className='p-3'>\r\n            <FileUpload\r\n              values={values}\r\n              setValues={setValues}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n          <ProductCreateForm\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n            handleCategoryChange={handleCategoryChange}\r\n            setValues={setValues}\r\n            values={values}\r\n            subOptions={subOptions}\r\n            showSubs={showSubs}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCreate;\r\n","import axios from 'axios';\r\n\r\nexport const getCategories = async () => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/categories`, {});\r\n};\r\n\r\nexport const getCategory = async (slug) => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/category/${slug}`, {});\r\n};\r\nexport const getCategorySubs = async (id) => {\r\n  return await axios.get(\r\n    `${process.env.REACT_APP_API}/category/subs/${id}`,\r\n    {}\r\n  );\r\n};\r\n\r\nexport const removeCategory = async (slug, authtoken) => {\r\n  return await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n};\r\n\r\nexport const updateCategory = async (slug, name, authtoken) => {\r\n  return await axios.put(\r\n    `${process.env.REACT_APP_API}/category/${slug}`,\r\n    { name },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nexport const createCategory = async (name, authtoken) => {\r\n  return await axios.post(\r\n    `${process.env.REACT_APP_API}/category`,\r\n    { name },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AdminNav = () => {\r\n  return (\r\n    <div>\r\n      <ul className='nav flex-column'>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/dashboard'>\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/product'>\r\n            Product\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/products'>\r\n            Products\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/category'>\r\n            Categories\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/sub'>\r\n            Sub Category\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/coupon'>\r\n            Coupon\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/user/password'>\r\n            Password\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminNav;\r\n","import axios from 'axios';\r\n\r\nexport const createProduct = async (values, authtoken) => {\r\n  return await axios.post(\r\n    `${process.env.REACT_APP_API}/product`,\r\n    { ...values },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nexport const getProductsByCount = async (count) => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/products/${count}`, {});\r\n};\r\n\r\nexport const getProducts = async () => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/product`);\r\n};\r\n\r\nexport const getProduct = async (slug) => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/product/${slug}`);\r\n};\r\n\r\nexport const removeProduct = async (slug, authtoken) => {\r\n  return await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n};\r\n\r\nexport const updateProduct = async (slug, values, authtoken) => {\r\n  return await axios.put(\r\n    `${process.env.REACT_APP_API}/product/${slug}`,\r\n    { ...values },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nexport const listProducts = async (sort, order, page) => {\r\n  return await axios.post(`${process.env.REACT_APP_API}/products/`, {\r\n    sort,\r\n    order,\r\n    page,\r\n  });\r\n};\r\n\r\nexport const getProductsCount = async () => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/products/total`);\r\n};\r\n\r\nexport const productStar = async (productId, star, authtoken) => {\r\n  return await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`,\r\n    { star },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nexport const getRelated = async (productId) => {\r\n  return await axios.get(\r\n    `${process.env.REACT_APP_API}/product/related/${productId}`\r\n  );\r\n};\r\n\r\nexport const fetchProductsByFilter = async (arg) => {\r\n  return await axios.post(`${process.env.REACT_APP_API}/search/filters/`, arg);\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Resizer from 'react-image-file-resizer';\r\nimport axios from 'axios';\r\nimport Avatar from 'antd/lib/avatar';\r\nimport Badge from 'antd/lib/badge';\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n  const user = useSelector((state) => state.user);\r\n\r\n  const resizeFile = (file) =>\r\n    new Promise((resolve) => {\r\n      Resizer.imageFileResizer(\r\n        file,\r\n        720,\r\n        720,\r\n        'JPEG',\r\n        100,\r\n        0,\r\n        (uri) => {\r\n          resolve(uri);\r\n        },\r\n        'base64'\r\n      );\r\n    });\r\n\r\n  const fileUploadAndResize = async (e) => {\r\n    //resize\r\n    let files = e.target.files;\r\n    let allUploadedFiles = values.images;\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i = 0; i < files.length; i++) {\r\n        try {\r\n          // Resizer.imageFileResizer(files[i], 720, 720, 'JPEG', 100, 0, (uri) => {}, 'base64')\r\n          const image = await resizeFile(files[i]);\r\n          const res = await axios.post(\r\n            `${process.env.REACT_APP_API}/uploadimages`,\r\n            { image },\r\n            {\r\n              headers: {\r\n                authtoken: user ? user.token : '',\r\n              },\r\n            }\r\n          );\r\n          allUploadedFiles.push(res.data);\r\n          setValues({ ...values, images: allUploadedFiles });\r\n        } catch (error) {\r\n          console.log('From upload files', error.response);\r\n          setLoading(false);\r\n        }\r\n      }\r\n      setLoading(false);\r\n    }\r\n    //send to server to upload to cloudinary\r\n    //set url to images[] in parent component - ProductCreate\r\n  };\r\n\r\n  const handleImageRemove = async (public_id) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.post(\r\n        `${process.env.REACT_APP_API}/removeimage`,\r\n        { public_id },\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : '',\r\n          },\r\n        }\r\n      );\r\n\r\n      let { images } = values;\r\n      images = images.filter((image) => image.public_id !== public_id);\r\n      setValues({ ...values, images });\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log('From remove image', error.response);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {values.images.length > 0 && (\r\n        <div className='row'>\r\n          {values.images.map((image) => (\r\n            <Badge\r\n              key={image.public_id}\r\n              count='x'\r\n              onClick={() => handleImageRemove(image.public_id)}\r\n              style={{ cursor: 'pointer' }}\r\n            >\r\n              <Avatar\r\n                src={image.url}\r\n                size={100}\r\n                shape='square'\r\n                className='ml-3'\r\n              />\r\n            </Badge>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div className='row'>\r\n        <label className='btn btn-primary btn-raised mt-3'>\r\n          Choose File\r\n          <input\r\n            type='file'\r\n            multiple\r\n            accept='images/*'\r\n            hidden\r\n            onChange={fileUploadAndResize}\r\n          />\r\n        </label>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"],"sourceRoot":""}