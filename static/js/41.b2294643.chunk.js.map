{"version":3,"sources":["functions/coupon.js","pages/admin/coupon/CouponCreate.js","components/nav/AdminNav.js"],"names":["getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CouponCreatePage","useState","name","setName","Date","expiry","setExpiry","discount","setDiscount","coupons","setCoupons","loading","setLoading","user","useSelector","state","useEffect","loadCoupons","res","data","handleSubmit","e","preventDefault","token","toast","success","error","response","err","console","log","handleRemove","window","confirm","className","AdminNav","onSubmit","type","onChange","target","value","autoFocus","required","selected","date","length","scope","map","toLocaleDateString","DeleteOutlined","style","cursor","onClick","_id","to"],"mappings":"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","file":"static/js/41.b2294643.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport const getCoupons = async () => {\r\n  return await axios.get(`${process.env.REACT_APP_API}/coupons`);\r\n};\r\n\r\nexport const removeCoupon = async (couponId, authtoken) => {\r\n  return await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n};\r\n\r\nexport const createCoupon = async (coupon, authtoken) => {\r\n  return await axios.post(\r\n    `${process.env.REACT_APP_API}/coupon`,\r\n    { coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { DeleteOutlined } from '@ant-design/icons';\r\n\r\nimport {\r\n  getCoupons,\r\n  createCoupon,\r\n  removeCoupon,\r\n} from '../../../functions/coupon';\r\nimport AdminNav from '../../../components/nav/AdminNav';\r\n\r\nconst CouponCreatePage = () => {\r\n  const [name, setName] = useState('');\r\n  const [expiry, setExpiry] = useState(new Date());\r\n  const [discount, setDiscount] = useState('');\r\n  const [coupons, setCoupons] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const user = useSelector((state) => state.user);\r\n\r\n  useEffect(() => {\r\n    loadCoupons();\r\n  }, []);\r\n\r\n  const loadCoupons = async () => {\r\n    const res = await getCoupons();\r\n    setCoupons(res.data);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    //create coupon\r\n    try {\r\n      setLoading(true);\r\n      const res = await createCoupon({ name, expiry, discount }, user.token);\r\n      setName('');\r\n      setDiscount('');\r\n      setExpiry(new Date());\r\n      setCoupons([res.data, ...coupons]);\r\n      setLoading(false);\r\n      toast.success(`${res.data.name} coupon is created`);\r\n    } catch (error) {\r\n      toast.error(error.response.data.err);\r\n      console.log('From create coupon', error.response);\r\n    }\r\n  };\r\n\r\n  const handleRemove = async (couponId) => {\r\n    if (window.confirm('Delete The Coupon?')) {\r\n      try {\r\n        setLoading(true);\r\n        const res = await removeCoupon(couponId, user.token);\r\n        await loadCoupons();\r\n        setLoading(false);\r\n        toast.error(`Coupon ${res.data.name} deleted`);\r\n      } catch (error) {\r\n        console.log('From handle remove coupon', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container-fluid'>\r\n      <div className='row'>\r\n        <div className='col-md-2'>\r\n          <AdminNav />\r\n        </div>\r\n        <div className='col-md-10'>\r\n          {loading ? (\r\n            <h4 className='text-danger'>Loading...</h4>\r\n          ) : (\r\n            <h4>Coupons</h4>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div className='form-group'>\r\n              <label className='text-muted'>Name</label>\r\n              <input\r\n                type='text'\r\n                className='form-control'\r\n                onChange={(e) => setName(e.target.value)}\r\n                value={name}\r\n                autoFocus\r\n                required\r\n              />\r\n            </div>\r\n            <div className='form-group'>\r\n              <label className='text-muted'>Discount %</label>\r\n              <input\r\n                type='text'\r\n                className='form-control'\r\n                onChange={(e) => setDiscount(e.target.value)}\r\n                value={discount}\r\n                required\r\n              />\r\n            </div>\r\n            <div className='form-group'>\r\n              <label className='text-muted'>Expiry</label>\r\n              <br />\r\n              <DatePicker\r\n                className='form-control'\r\n                selected={expiry}\r\n                value={expiry}\r\n                onChange={(date) => setExpiry(date)}\r\n                required\r\n              />\r\n            </div>\r\n            <button className='btn btn-outline-primary'>Save</button>\r\n          </form>\r\n          <br />\r\n          <h4>{coupons.length} Coupons</h4>\r\n\r\n          <table className='table table-bordered'>\r\n            <thead className='thead-light'>\r\n              <tr>\r\n                <th scope='col'>Name</th>\r\n                <th scope='col'>Expiry</th>\r\n                <th scope='col'>Discount</th>\r\n                <th scope='col'>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {coupons.length > 0 &&\r\n                coupons.map((coupon) => (\r\n                  <tr key={coupon._id}>\r\n                    <td>{coupon.name}</td>\r\n                    <td>{new Date(coupon.expiry).toLocaleDateString()}</td>\r\n                    <td>{coupon.discount}</td>\r\n                    <td>\r\n                      <DeleteOutlined\r\n                        className='text-danger'\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={() => handleRemove(coupon._id)}\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CouponCreatePage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AdminNav = () => {\r\n  return (\r\n    <div>\r\n      <ul className='nav flex-column'>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/dashboard'>\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/product'>\r\n            Product\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/products'>\r\n            Products\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/category'>\r\n            Categories\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/sub'>\r\n            Sub Category\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/admin/coupon'>\r\n            Coupon\r\n          </Link>\r\n        </li>\r\n        <li className='nav-item'>\r\n          <Link className='nav-link' to='/user/password'>\r\n            Password\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminNav;\r\n"],"sourceRoot":""}