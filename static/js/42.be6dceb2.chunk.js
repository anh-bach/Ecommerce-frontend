(this["webpackJsonpecommerce-client"]=this["webpackJsonpecommerce-client"]||[]).push([[42],{1161:function(e,t,r){"use strict";r.r(t);var n=r(13),a=r.n(n),c=r(14),s=r(108),u=r(0),o=r(23),p=r(41),i=r(983),h=r.n(i),d=(r(1083),r(150)),l=r(6),b=r(2);t.default=function(e){var t=e.history,r=Object(u.useState)(!1),n=Object(s.a)(r,2),i=n[0],m=n[1],f=Object(u.useState)([]),j=Object(s.a)(f,2),O=j[0],x=j[1],v=Object(u.useState)(0),k=Object(s.a)(v,2),y=k[0],w=k[1],g=Object(u.useState)(""),C=Object(s.a)(g,2),N=C[0],S=C[1],T=Object(u.useState)(!1),F=Object(s.a)(T,2),A=F[0],P=F[1],D=Object(u.useState)(""),I=Object(s.a)(D,2),$=I[0],E=I[1],J=Object(u.useState)(0),L=Object(s.a)(J,2),G=L[0],R=L[1],Y=Object(u.useState)(""),q=Object(s.a)(Y,2),z=q[0],B=q[1],H=Object(o.c)((function(e){return e})),K=H.user,M=H.COD,Q=Object(o.b)();Object(u.useEffect)((function(){U()}),[K]);var U=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,Object(d.f)(K.token);case 4:t=e.sent,x(t.data.products),w(t.data.cartTotal),m(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("from Checkout Load Products",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window){e.next=18;break}return e.prev=1,m(!0),localStorage.removeItem("cart"),Q({type:l.a,payload:[]}),e.next=7,Object(d.e)(K.token);case 7:x([]),w(0),R(0),E(""),p.b.success("Cart is empty. Continue Shopping"),m(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("From empty cart",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N){e.next=4;break}return p.b.error("Please Fill In Your Address to proceed the order"),e.abrupt("return");case 4:return e.next=6,Object(d.j)(K.token,N.slice(3,N.length-4));case 6:e.sent.data.ok&&(P(!0),p.b.success("Address Saved")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("From save address",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(K.token,$);case 3:(t=e.sent).data&&(R(t.data),Q({type:l.c,payload:!0})),t.data.err&&(B(t.data.err),Q({type:l.c,payload:!1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("From apply discount coupon",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.c)(K.token,M,$);case 3:if(!e.sent.data.ok){e.next=12;break}return localStorage.removeItem("cart"),Q({type:l.a,payload:[]}),Q({type:l.c,payload:!1}),Q({type:l.b,payload:!1}),e.next=11,Object(d.e)(K.token);case 11:t.push("/user/history");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("From cash order",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"row mt-2 px-2",children:[Object(b.jsxs)("div",{className:"col-md-6",children:[Object(b.jsx)("h4",{children:"Delivery Address"}),Object(b.jsx)("br",{}),Object(b.jsxs)(u.Fragment,{children:[Object(b.jsx)(h.a,{theme:"snow",value:N,onChange:S}),Object(b.jsx)("button",{className:"btn btn-primary mt-2",onClick:W,children:"Save"})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("h4",{children:"Got Coupon?"}),Object(b.jsxs)(u.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:$,onChange:function(e){E(e.target.value),B("")}}),Object(b.jsx)("button",{className:"btn btn-primary mt-2",onClick:X,children:"Apply"})]}),Object(b.jsx)("br",{}),z&&Object(b.jsx)("p",{className:"bg-danger p-2",children:z})]}),Object(b.jsxs)("div",{className:"col-md-6",children:[i?Object(b.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(b.jsx)("h4",{children:"Order Summary"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("p",{children:["Products ",O.length]}),Object(b.jsx)("hr",{}),O.length>0&&O.map((function(e,t){return Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:[e.product.title," (",e.color,") x ",e.count," = $",e.product.price*e.count]})},t)})),Object(b.jsx)("hr",{}),Object(b.jsxs)("p",{children:["Cart Total: $",y]}),G>0&&Object(b.jsxs)("p",{className:"bg-success p-2",children:["Discount Applied: Total Payment: $",G]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-6",children:M?Object(b.jsx)("button",{className:"btn btn-primary",disabled:!A||!O.length,onClick:Z,children:"Place Order"}):Object(b.jsx)("button",{className:"btn btn-primary",disabled:!A||!O.length,onClick:function(){return t.push("/payment")},children:"Place Order"})}),Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsx)("button",{className:"btn btn-primary",onClick:V,disabled:!O.length,children:"Empty Cart"})})]})]})]})}},150:function(e,t,r){"use strict";r.d(t,"k",(function(){return o})),r.d(t,"f",(function(){return p})),r.d(t,"e",(function(){return i})),r.d(t,"j",(function(){return h})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return b})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return f})),r.d(t,"a",(function(){return j})),r.d(t,"i",(function(){return O}));var n=r(13),a=r.n(n),c=r(14),s=r(25),u=r.n(s),o=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/cart"),{cart:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/cart"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.delete("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/cart"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/address"),{address:r},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/cart/coupon"),{coupon:r},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/order"),{stripeResponse:r},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/cash-order"),{COD:r,couponApplied:n},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/orders"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/wishlist"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/wishlist"),{productId:r},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.put("".concat("https://mern-ecommerce-server-anh.herokuapp.com/api","/user/wishlist/").concat(r),{},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=42.be6dceb2.chunk.js.map